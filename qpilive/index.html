<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Live Stream</title>
    <!-- HLS.js ë¼ì´ë¸ŒëŸ¬ë¦¬: HLS ìŠ¤íŠ¸ë¦¬ë°ì„ ì¬ìƒí•˜ê¸° ìœ„í•œ í•„ìˆ˜ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        /* ê°„ë‹¨í•œ ë””ìì¸ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #18181b; /* ë‹¤í¬ ëª¨ë“œ ë°°ê²½ */
            color: #efeff1; /* ë°ì€ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        #stream-wrapper {
            width: 100%;
            max-width: 1280px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
            aspect-ratio: 16 / 9; /* 16:9 ë¹„ìœ¨ ìœ ì§€ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background-color: #000;
        }
        #video-player {
            width: 100%;
            height: 100%;
            display: block;
        }
        h1 {
            margin-bottom: 24px;
            font-size: 2rem;
        }
    </style>
</head>
<body>

    <h1>ğŸ”´ MY LIVE STREAM</h1>

    <div id="stream-wrapper">
        <video id="video-player" controls autoplay muted playsinline></video>
    </div>

    <script>
        // ==================================================================
        // âš ï¸ ì´ ì•„ë˜ ë‘ ê°œì˜ ê°’ë§Œ ë‹¹ì‹ ì˜ ì •ë³´ë¡œ ì •í™•í•˜ê²Œ ìˆ˜ì •í•˜ì„¸ìš”! âš ï¸
        // ==================================================================

        // 1. ë‹¹ì‹ ì˜ Oracle Cloud ì„œë²„ ê³µì¸ IP ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
        const YOUR_SERVER_IP = "155.248.205.232"; // ì˜ˆì‹œ IPì…ë‹ˆë‹¤. ë³¸ì¸ IPë¡œ ë³€ê²½!

        // 2. OBSì—ì„œ ì„¤ì •í•œ ìŠ¤íŠ¸ë¦¼ í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì˜ˆ: "test")
        const YOUR_STREAM_KEY = "test";

        // ==================================================================
        // ì•„ë˜ ì½”ë“œëŠ” ìˆ˜ì •í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤.
        // ==================================================================

        const videoPlayer = document.getElementById('video-player');
        
        // HLS ìŠ¤íŠ¸ë¦¼ ì£¼ì†Œ ìë™ ìƒì„±
        const hlsUrl = `http://live.qpi.kro.kr:8080/hls/test.m3u8`;

        console.log("ìŠ¤íŠ¸ë¦¬ë° ì£¼ì†Œ:", hlsUrl);

        if (Hls.isSupported()) {
            console.log("HLS.jsë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ìƒí•©ë‹ˆë‹¤.");
            const hls = new Hls();
            hls.loadSource(hlsUrl);
            hls.attachMedia(videoPlayer);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
                videoPlayer.play().catch(error => {
                    console.warn("ìë™ ì¬ìƒì´ ë¸Œë¼ìš°ì € ì •ì±…ì— ì˜í•´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ í´ë¦­ì´ í•„ìš”í•©ë‹ˆë‹¤.", error);
                });
            });
            // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œê·¸ ì¶œë ¥
            hls.on(Hls.Events.ERROR, function(event, data) {
                if (data.fatal) {
                    console.error("ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ ë°œìƒ:", data.type, data.details);
                }
            });
        } 
        // HLS.jsë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €(ì˜ˆ: Safari)ì˜ ê²½ìš°
        else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
            console.log("ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ HLS ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì¬ìƒí•©ë‹ˆë‹¤.");
            videoPlayer.src = hlsUrl;
            videoPlayer.addEventListener('loadedmetadata', function () {
                videoPlayer.play().catch(error => {
                    console.warn("ìë™ ì¬ìƒì´ ë¸Œë¼ìš°ì € ì •ì±…ì— ì˜í•´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ í´ë¦­ì´ í•„ìš”í•©ë‹ˆë‹¤.", error);
                });
            });
        } else {
            alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìŠ¤íŠ¸ë¦¬ë°ì„ ì¬ìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    </script>

</body>
</html>
